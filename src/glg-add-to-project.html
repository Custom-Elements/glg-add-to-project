<link rel="import" href="../node_modules/glg-nectar/src/glg-nectar.html">
<link rel="import" href="../node_modules/ui-typeahead/src/ui-typeahead.html">
<link rel="import" href="../node_modules/glg-current-user/src/glg-current-user.html">
<link rel="import" href="../node_modules/ui-fonts/fonts.html">
<polymer-element name="glg-add-to-project"
  attributes="target"
  on-inputchange="{{queryUpdated}}"
  on-user="{{buildIndex}}"
  on-results="{{displayNectarResults}}"
  on-itemselected="{{selectTarget}}"
  >
  <template>
    <link rel="stylesheet" type="text/css" href="./glg-add-to-project.less">
    <glg-current-user></glg-current-user>
    <glg-nectar
      id="nectar"
      urls="{{nectarUrl}}"
      appName={{appName}}
      interleave="true"
      scoreThreshold="0.5"
      howMany="10"
      secondarySortField="createDate"
      secondarySortOrder="desc"
      >
    </glg-nectar>
    <ui-typeahead
        id="targets"
        sticky
        placeholder="Search ... "
        debounce="50">
      <icon search></icon>
      <template value>
        <value>
          <div class="name">
            <span>{{name}}</span>
            <span class="meta">{{created | formatDate}}</span>
          </div>
        </value>
      </template>
      <template id="matches" repeat="{{matches}}">
        <ui-typeahead-item>
          <div class="name">
            <span>{{name}}</span>
            <span class="meta">{{created | formatDate}}</span>
          </div>
        </ui-typeahead-item>
      </template>
    </ui-typeahead>
  </template>
  <script src="./glg-add-to-project.litcoffee"></script>
</polymer-element>
