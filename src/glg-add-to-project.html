<link rel="import" href="../node_modules/glg-current-user/src/glg-current-user.html">
<link rel="import" href="../node_modules/glg-nectar/src/glg-nectar.html">
<polymer-element name="glg-add-to-project" attributes="cmids appName rmPersonId"
  on-project="{{addToProject}}"
  >
  <template>
    <link rel="stylesheet" type="text/css" href="./glg-add-to-project.less">
    <glg-current-user id="atpuser" username="{{username}}"></glg-current-user>
    <core-ajax
      auto=true
      id="myprojects"
      method="GET"
      url=""
      handleAs="json"
      withCredentials=true
      on-core-response="{{myprojectsResponse}}">
    </core-ajax>
    <div>
      <h1>Add to Project</h1>
      <div id="spinner" class="progress"><div>Loadingâ€¦</div></div>
      <ui-typeahead
          id="projects"
          class="glg-hidden"
          placeholder="Find a project by name..."
          debounce="50">
        <icon search></icon>
        <template id="projectMatches" repeat="{{matches}}">
          <ui-typeahead-item>
            <div>{{name}}<div>
            <div style="margin-left: 1rem; font-size: 0.75rem!important;">
              <span>{{createDate | date}} - </span>
              <span style="font-weight:bold;">{{firm}}</span>
            </div>
          </ui-typeahead-item>
        </template>
      </ui-typeahead>
    </div>
  </template>
  <script src="../bower_components/polymer-filters/filter-date.js"></script>
  <script src="./glg-add-to-project.litcoffee"></script>
</polymer-element>
