<link rel="import" href="https://services.glgresearch.com/ui-toolkit/node_modules/glg-nectar/src/glg-nectar.html">
<link rel="import" href="https://services.glgresearch.com/ui-toolkit/node_modules/ui-typeahead/src/ui-typeahead.html">
<link rel="import" href="https://services.glgresearch.com/ui-toolkit/node_modules/glg-current-user/src/glg-current-user.html">
<link rel="import" href="../node_modules/ui-fonts/fonts.html">
<polymer-element name="glg-add-to-project"
  attributes="targetType"
  on-inputchange="{{queryUpdated}}"
  on-user="{{buildIndex}}"
  on-results="{{displayNectarResults}}"
  on-itemselected="{{selectProject}}"
  >
  <template>
    <link rel="stylesheet" type="text/css" href="./glg-add-to-project.less">
    <glg-current-user></glg-current-user>
    <glg-nectar
      id="nectar"
      urls="{{nectarUrl}}"
      appName={{appName}}
      interleave="true"
      scoreThreshold="0.5"
      howMany="10"
      secondarySortField="createDate"
      secondarySortOrder="desc"
      >
    </glg-nectar>
    <select on-change="{{targetTypeSelected}}">
      <option value="consults" selected>Consults</option>
      <option value="surveys">Surveys</option>
      <option value="meetings">Meetings</option>
      <option value="lists">Lists</option>
    </select>
    <ui-typeahead
        id="projects"
        sticky
        placeholder="Search {{targetType}} ..."
        debounce="50">
       <icon search></icon>
      <template id="projectMatches" repeat="{{matches}}">
        <ui-typeahead-item>
          <div class="proj-name">
            <span class="ico-add"><icon plus></icon></span>
            <span>{{name}}</span>
            <div class="proj-meta">
              <span>{{createDate}} </span>
              <span class="proj-meta-important"> {{firm || client || type}}</span>
            </div>
          </div>
        </ui-typeahead-item>
      </template>
    </ui-typeahead>
  </template>
  <script src="./glg-add-to-project.litcoffee"></script>
</polymer-element>
