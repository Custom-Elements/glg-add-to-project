<!doctype html>

<html>
  <head>
    <title>glg-add-to-project</title>
    <script src="node_modules/webcomponents.js/webcomponents.js"></script>
    <link rel="import" href="https://services.glgresearch.com/ui-toolkit/polymer.html">
    <link rel="import" href="https://services.glgresearch.com/ui-toolkit/ui-toolkit.html">
    <link rel="import" href="src/glg-add-to-project.html">
    <style>
      body {
        font-family: "Helvetica Neue", "Helvetica", "Arial";
        color: #454545;
      }
      glg-add-to-project {
        position: absolute;
        top: 1em;
        left: 1em;
        height: 90%;
        width: 25em;
      }
    </style>
  </head>
  <body container unresolved>
    <!-- hardcoded values for published attrs just for demo purposes -->
    <glg-add-to-project
      id="atp"
      cmids="3938"
      appName="balrog"
      rmPersonId="881448"
    >
    </glg-add-to-project>
  </body>
  <script>
    document.addEventListener('polymer-ready', function() {
      // replace add-to-project attrs with values from querystring where available
      var atp = document.querySelector('glg-add-to-project');
      var qs = location.search.slice(1).split('&');
      var qparams = {};
      qs.forEach(function(item){
        var p = item.split('=')
        qparams[p[0]] = p[1];
      });
      console.log("query params: " + qparams);
      if (typeof qparams['cmids'] !== 'undefined') {
        atp.cmids = qparams['cmids'];
      }
      if (typeof qparams['appName'] !== 'undefined') {
        atp.appName = qparams['appName'];
      }
    });
  </script>
</html>
